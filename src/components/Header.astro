---
const astyle = "hover:text-accent transition";
---

<header class="fixed top-6 left-0 right-0 z-50 flex justify-center pointer-events-none">
  <nav
    id="site-nav"
    class="pointer-events-auto px-6 py-3 rounded-full transition-all text-sm md:text-lg flex justify-center items-center gap-3 md:gap-6 bg-[#1d2634] md:bg-none"
  >
    <a href="#experience" class={astyle}>Experience</a>
    <a href="#projects" class={astyle}>Projects</a>
    <a href="#stack" class={astyle}>Stack</a>
    <a href="#about" class={astyle}>About me</a>
    <a href="#contact" class={astyle}>Contact</a>
  </nav>
</header>

<script is:inline>
  if (typeof window !== 'undefined') {
    const nav = document.getElementById('site-nav');

    const setInitialBg = () => {
      if (window.innerWidth < 768) { // Tailwind 'md' = 768px
        nav.classList.add('bg-[#1d2634]', 'backdrop-blur-md', 'shadow-md');
      } else {
        nav.classList.remove('bg-[#1d2634]', 'backdrop-blur-md', 'shadow-md');
      }
    };

    const toggleHeaderBg = () => {
      if (window.innerWidth >= 768) {
        if (window.scrollY > 50) {
          nav.classList.add('bg-[#1d2634]', 'backdrop-blur-md', 'shadow-md');
        } else {
          nav.classList.remove('bg-[#1d2634]', 'backdrop-blur-md', 'shadow-md');
        }
      }
    };

    // Ejecutar al cargar
    setInitialBg();
    toggleHeaderBg();

    // Ejecutar al hacer scroll o redimensionar
    window.addEventListener('scroll', toggleHeaderBg);
    window.addEventListener('resize', () => {
      setInitialBg();
      toggleHeaderBg();
    });
  }
</script>
